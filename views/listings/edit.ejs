<% layout("layouts/boilerplate") %>
<body>
  <h3 class="edit-listing-title">Edit Your Listing</h3>

  <form class="edit-listing-form" 
    method="POST" action="/listings/<%= listing._id %>?_method=PUT" 
    class="need-validation">

    <div class="form-group">
      <label for="title">Title:</label>
      <input id="title" 
      name="listing[title]" 
      value="<%= listing.title %>" 
      type="text" 
      required 
      class="form-input" />
    </div>

    <div class="form-group">
      <label for="description">Description:</label>
      <textarea id="description" 
      name="listing[description]" 
      required 
      class="form-input"><%= listing.description %></textarea>
    </div>

    <div class="form-group">
      <label for="image">Image URL:</label>
      <input id="image" 
      name="listing[image][url]" 
      value="<%= listing.image && listing.image.url ? listing.image.url : '' %>" 
      type="text" 
      placeholder="Enter image URL" 
      required 
      class="form-input" />
    </div>

    <div class="form-group-flex">
      <div class="flex-item">
        <label for="price">Price:</label>
        <input id="price" 
        name="listing[price]" 
        value="<%= listing.price %>" 
        type="number" 
        required 
        min="0" 
        class="form-input" />
      </div>

      <div class="flex-item">
        <label for="country">Country:</label>
        <input id="country" 
        name="listing[country]" 
        value="<%= listing.country %>" 
        type="text" 
        required 
        class="form-input" />
      </div>

      <div class="flex-item">
        <label for="location">Location:</label>
        <input id="location" 
        name="listing[location]" 
        value="<%= listing.location %>" 
        type="text" 
        required 
        class="form-input" />
      </div>
    </div>
    <br>

    <div class="col-12">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
        <label class="form-check-label" for="invalidCheck">
          Agree to terms and conditions
        </label>
        <div class="invalid-feedback">
          You must agree before submitting.
        </div>
      </div>
    </div>

    <br>
    <button type="submit" class="submit-button">Edit Listing</button>
  </form>
  <br>
</body>
